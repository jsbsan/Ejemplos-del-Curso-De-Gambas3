.schema
CREATE TABLE "mantenimiento" ("idmantenimiento" INTEGER PRIMARY KEY  NOT NULL , "fecha" DATETIME, "idvivienda" INTEGER, "tiporeparacion" TEXT, "materiales" TEXT, "costomateriales" FLOAT, "costomanoobra" FLOAT, "costootros" FLOAT, "tipopagomateriales" TEXT, "tipopagomanoobra" TEXT, "datopagomateriales" TEXT, "datopagomanoobra" TEXT, "comentario" TEXT);
CREATE TABLE "recibopago" ("idrecibo" INTEGER PRIMARY KEY  NOT NULL , "idcontrato" INTEGER, "fecharecibo" DATETIME, "importe" FLOAT, "fechapago" DATETIME, "recibidopor" TEXT, "comentarios" TEXT);
CREATE TABLE "recibocobro" ("idrecibo" INTEGER PRIMARY KEY  NOT NULL , "idcontrato" INTEGER, "fecharecibo" DATETIME, "importe" FLOAT,  "comentarios" TEXT);
CREATE TABLE "otrospagos" ("idotrospagos" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , "fecha" DATETIME, "idvivienda" INTEGER, "cantidad" FLOAT, "descripcion" TEXT, "tipospagootros" TEXT, "datopagootros" TEXT);
CREATE TABLE "contrato" ("idcontrato" INTEGER PRIMARY KEY  NOT NULL , "idvivienda" INTEGER, "idinquilino" INTEGER, "fechainicio" DATETIME,  "fechafinal" DATETIME,"preciomensual" FLOAT, "deposito" FLOAT, "comentario" TEXT, "vigente" BOOL);
CREATE TABLE "inquilino" ("idinquilino" INTEGER PRIMARY KEY  NOT NULL , "archivo" INTEGER, "ssn" INTEGER, "nombre" TEXT, "apellido" TEXT, "fechanacimiento" DATETIME, "telefonopersonal" TEXT, "domicilioprevio" TEXT, "tiempodomicilioprevio" TEXT, "oficio" TEXT, "tiempooficio" TEXT, "telefonoempresa" TEXT, "credito" TEXT, "estadocivil" TEXT, "nombreesposa" TEXT, "hijos" TEXT, "nombrehijos" TEXT, "mascotas" TEXT, "referencias" TEXT, "bono" TEXT,"automovil" TEXT,"modelo" TEXT,"color" TEXT,"numeroplaca" TEXT);
CREATE TABLE "vivienda" ("idvivienda" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , "numero" INTEGER, "denominacioncorta" TEXT, "archivo" INTEGER,"calle" TEXT, "colonia" TEXT, "cp" TEXT, "numerodormitorio" INTEGER, "numerobano" INTEGER, "estacionamiento" TEXT, "preciorenta" FLOAT, "deposito" FLOAT, "comentario" TEXT, "descripcion" TEXT);
CREATE VIEW "inquilinoreducido" AS select idinquilino,archivo,ssn,nombre,apellido,fechanacimiento,telefonopersonal from inquilino;
CREATE VIEW "viviendareducida" AS select idvivienda,numero,archivo,denominacioncorta as "corta" from vivienda;
CREATE VIEW "viviendareducida2" AS select idvivienda,numero||' '||archivo||' '||denominacioncorta as "corta" from vivienda;
CREATE VIEW "viviendareducida3" AS select idvivienda,'nº '||numero||' ('||archivo||') '||denominacioncorta as "corta" from vivienda;
CREATE VIEW "inquilinoreducido2" AS select idinquilino,'nº '||ssn||' ('||archivo||') '||nombre||' '||apellido as "nombre_completo",fechanacimiento,telefonopersonal from inquilino;
CREATE VIEW "vistacontrato" AS select idcontrato,vigente,corta,nombre_completo,fechainicio,fechafinal,preciomensual,deposito,comentario from viviendareducida3,inquilinoreducido2,contrato where contrato.idvivienda=viviendareducida3.idvivienda and contrato.idinquilino=inquilinoreducido2.idinquilino;
